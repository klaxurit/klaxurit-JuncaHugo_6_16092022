<a id="loadMore" data-currentPage="1" class="btn btn-primary"><span class="snow-text">View more comments</span></a>

{% block javascripts %}
    {# <script src="{{ asset('/assets/js/loadMore.js') }}"></script> #}
    <script language="javascript" 
        src = "https://code.jquery.com/jquery-2.2.4.min.js">
    </script> 

    <script language="javascript">
    const addCommentItem = function(comments) {

        comments.forEach(comment => {
            $('#trick__comment').append(
                `
                <li class="comment user-comment" id="trick__comment">
                    <div class="info">
                        <a href="#">${comment.user.username}</a>
                        <span>${comment.createdAt|ago}</span>
                    </div>
                    <a class="avatar" href="#">
                        <img src="{{ asset('assets/images/avatar.png') }}" width="35" alt="Profile Avatar" title="Anie Silverston"/>
                    </a>
                    <p>${comment.content}</p>
                </li>
                `
            )
        })
    }

    $(document).ready(function(){
        let currentPage = 2;
        $("#loadMore").on("click", function(event){
            $.get("/ajax/comment?page=" + currentPage)
            .then(comments => {
                if (comments.length < 2){
                    currentPage++;
                    addCommentItem(comments);
                    deactivateButton();
                } else {
                    currentPage++;
                    addCommentItem(comments);
                }
            })
        });
        const deactivateButton = () => {
            document.querySelector('#loadMore').classList.remove('btn-primary');
            document.querySelector('#loadMore').classList.add('btn-secondary');
            document.querySelector('#loadMore').classList.add('disable');
        }
        
    })
    </script>
{% endblock %}